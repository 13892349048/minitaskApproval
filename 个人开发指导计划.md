# TaskFlowé¡¹ç›®ä¸ªäººå¼€å‘æŒ‡å¯¼è®¡åˆ’

## ğŸ¯ é¡¹ç›®åŸºæœ¬ä¿¡æ¯

### å¼€å‘é…ç½®
- **å¼€å‘äººå‘˜**ï¼š1äººå…¨èŒå¼€å‘
- **å¼€å‘å‘¨æœŸ**ï¼š16å‘¨ï¼ˆè°ƒæ•´åï¼Œè€ƒè™‘å­¦ä¹ æˆæœ¬ï¼‰
- **äº‘æœåŠ¡**ï¼šé˜¿é‡Œäº‘
- **ç›‘æ§æ–¹æ¡ˆ**ï¼šPrometheus + Grafana
- **éƒ¨ç½²æ–¹æ¡ˆ**ï¼šDocker + Kubernetes
- **æµ‹è¯•ç­–ç•¥**ï¼šè‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆæˆ‘æ¥æŒ‡å¯¼ï¼‰

### å­¦ä¹ é‡ç‚¹
- **Code Review**ï¼šæˆ‘æ¥æ•™ä½ è§„èŒƒå’Œæœ€ä½³å®è·µ
- **éƒ¨ç½²ç­–ç•¥**ï¼šè“ç»¿éƒ¨ç½²ã€æ»šåŠ¨æ›´æ–°ç­‰ï¼ˆå®è·µä¸­å­¦ä¹ ï¼‰
- **å¤‡ä»½æ¢å¤**ï¼šæ•°æ®åº“å¤‡ä»½å’Œæ¢å¤æ–¹æ¡ˆï¼ˆå®è·µä¸­å­¦ä¹ ï¼‰
- **K8séƒ¨ç½²**ï¼šä»åŸºç¡€åˆ°ç”Ÿäº§çº§éƒ¨ç½²

## ğŸ“… è°ƒæ•´åçš„å¼€å‘é˜¶æ®µ

### é˜¶æ®µ1ï¼šç¯å¢ƒæ­å»ºå’ŒåŸºç¡€æ¡†æ¶ï¼ˆWeek 1-3ï¼‰
**ç›®æ ‡**ï¼šæ­å»ºå®Œæ•´å¼€å‘ç¯å¢ƒï¼ŒæŒæ¡åŸºç¡€å·¥å…·

### é˜¶æ®µ2ï¼šæ ¸å¿ƒé¢†åŸŸå®ç°ï¼ˆWeek 4-8ï¼‰
**ç›®æ ‡**ï¼šå®ç°ç”¨æˆ·ã€é¡¹ç›®ã€ä»»åŠ¡æ ¸å¿ƒåŠŸèƒ½

### é˜¶æ®µ3ï¼šé«˜çº§åŠŸèƒ½å¼€å‘ï¼ˆWeek 9-12ï¼‰
**ç›®æ ‡**ï¼šæƒé™ç³»ç»Ÿã€æ–‡ä»¶ç®¡ç†ã€æœç´¢åŠŸèƒ½

### é˜¶æ®µ4ï¼šæµ‹è¯•å’Œä¼˜åŒ–ï¼ˆWeek 13-14ï¼‰
**ç›®æ ‡**ï¼šå®Œæ•´æµ‹è¯•ä½“ç³»ã€æ€§èƒ½ä¼˜åŒ–

### é˜¶æ®µ5ï¼šéƒ¨ç½²å’Œä¸Šçº¿ï¼ˆWeek 15-16ï¼‰
**ç›®æ ‡**ï¼šç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ã€ç›‘æ§é…ç½®

---

## ğŸš€ Week 1ï¼šé¡¹ç›®åˆå§‹åŒ–å’Œç¯å¢ƒæ­å»º

### æœ¬å‘¨ç›®æ ‡
- æ­å»ºé¡¹ç›®åŸºç¡€æ¡†æ¶
- é…ç½®å¼€å‘ç¯å¢ƒ
- å­¦ä¹ åŸºç¡€å·¥å…·ä½¿ç”¨

### Day 1-2ï¼šé¡¹ç›®ç»“æ„æ­å»º

#### æ­¥éª¤1ï¼šåˆ›å»ºé¡¹ç›®ç›®å½•
```bash
# åˆ›å»ºé¡¹ç›®æ ¹ç›®å½•
mkdir taskflow
cd taskflow

# åˆå§‹åŒ–Goæ¨¡å—
go mod init github.com/taskflow/taskflow

# åˆ›å»ºåŸºç¡€ç›®å½•ç»“æ„
mkdir -p cmd/api
mkdir -p internal/{domain,application,infrastructure,interfaces}
mkdir -p internal/domain/{user,project,task,shared}
mkdir -p internal/application/{user,project,task,shared}
mkdir -p internal/infrastructure/{persistence,messaging,config}
mkdir -p internal/interfaces/{http,cli}
mkdir -p pkg/{logger,errors,utils,constants}
mkdir -p configs
mkdir -p scripts
mkdir -p test/{unit,integration,e2e}
mkdir -p docs
mkdir -p deployments/{docker,kubernetes}
```

#### æ­¥éª¤2ï¼šåˆ›å»ºåŸºç¡€é…ç½®æ–‡ä»¶

**go.mod ä¾èµ–ç®¡ç†**
```go
module github.com/taskflow/taskflow

go 1.21

require (
    github.com/gin-gonic/gin v1.9.1
    github.com/golang-jwt/jwt/v5 v5.0.0
    github.com/google/uuid v1.3.0
    github.com/google/wire v0.5.0
    github.com/spf13/viper v1.16.0
    go.uber.org/zap v1.24.0
    gorm.io/driver/mysql v1.5.1
    gorm.io/gorm v1.25.2
    github.com/go-redis/redis/v8 v8.11.5
    github.com/swaggo/gin-swagger v1.6.0
    github.com/swaggo/swag v1.16.1
    github.com/go-playground/validator/v10 v10.14.1
    github.com/stretchr/testify v1.8.4
)
```

**é…ç½®æ–‡ä»¶ configs/config.yaml**
```yaml
# åº”ç”¨é…ç½®
app:
  name: "TaskFlow"
  version: "1.0.0"
  port: 8080
  mode: "development" # development, testing, production
  
# æ•°æ®åº“é…ç½®
database:
  driver: "mysql"
  host: "localhost"
  port: 3306
  username: "taskflow"
  password: "taskflow123"
  database: "taskflow"
  charset: "utf8mb4"
  parse_time: true
  loc: "Local"
  max_idle_conns: 10
  max_open_conns: 100
  conn_max_lifetime: 3600 # ç§’

# Redisé…ç½®
redis:
  host: "localhost"
  port: 6379
  password: ""
  database: 0
  pool_size: 10
  min_idle_conns: 5

# JWTé…ç½®
jwt:
  secret: "your-super-secret-jwt-key-change-in-production"
  expire_hours: 24
  refresh_expire_hours: 168 # 7å¤©

# æ—¥å¿—é…ç½®
log:
  level: "debug" # debug, info, warn, error
  format: "json" # json, text
  output: "stdout" # stdout, file
  file_path: "logs/app.log"
  max_size: 100 # MB
  max_backups: 7
  max_age: 30 # å¤©

# æ–‡ä»¶ä¸Šä¼ é…ç½®
upload:
  max_size: 10485760 # 10MB
  allowed_types: ["jpg", "jpeg", "png", "pdf", "doc", "docx"]
  storage_path: "uploads"
  chunk_size: 1048576 # 1MB
```

#### æ­¥éª¤3ï¼šåˆ›å»ºDockerå¼€å‘ç¯å¢ƒ

**docker-compose.dev.yml**
```yaml
version: '3.8'

services:
  # MySQLæ•°æ®åº“
  mysql:
    image: mysql:8.0
    container_name: taskflow-mysql
    restart: unless-stopped
    environment:
      MYSQL_ROOT_PASSWORD: rootpass
      MYSQL_DATABASE: taskflow
      MYSQL_USER: taskflow
      MYSQL_PASSWORD: taskflow123
    ports:
      - "3306:3306"
    volumes:
      - mysql_data:/var/lib/mysql
      - ./scripts/init.sql:/docker-entrypoint-initdb.d/init.sql
    networks:
      - taskflow-network

  # Redisç¼“å­˜
  redis:
    image: redis:7-alpine
    container_name: taskflow-redis
    restart: unless-stopped
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    networks:
      - taskflow-network

  # åº”ç”¨æœåŠ¡ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
  app:
    build:
      context: .
      dockerfile: scripts/docker/Dockerfile.dev
    container_name: taskflow-app
    restart: unless-stopped
    ports:
      - "8080:8080"
    volumes:
      - .:/app
      - /app/vendor
    environment:
      - ENV=development
      - DB_HOST=mysql
      - REDIS_HOST=redis
    depends_on:
      - mysql
      - redis
    networks:
      - taskflow-network

volumes:
  mysql_data:
  redis_data:

networks:
  taskflow-network:
    driver: bridge
```

**Dockerfile.dev**
```dockerfile
# scripts/docker/Dockerfile.dev
FROM golang:1.21-alpine AS development

# å®‰è£…å¿…è¦å·¥å…·
RUN apk add --no-cache git

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# å®‰è£…çƒ­é‡è½½å·¥å…·
RUN go install github.com/cosmtrek/air@latest

# å¤åˆ¶go modæ–‡ä»¶
COPY go.mod go.sum ./

# ä¸‹è½½ä¾èµ–
RUN go mod download

# å¤åˆ¶æºä»£ç 
COPY . .

# æš´éœ²ç«¯å£
EXPOSE 8080

# ä½¿ç”¨airè¿›è¡Œçƒ­é‡è½½
CMD ["air", "-c", ".air.toml"]
```

**Airé…ç½®æ–‡ä»¶ .air.toml**
```toml
root = "."
testdata_dir = "testdata"
tmp_dir = "tmp"

[build]
  args_bin = []
  bin = "./tmp/main"
  cmd = "go build -o ./tmp/main ./cmd/api"
  delay = 0
  exclude_dir = ["assets", "tmp", "vendor", "testdata"]
  exclude_file = []
  exclude_regex = ["_test.go"]
  exclude_unchanged = false
  follow_symlink = false
  full_bin = ""
  include_dir = []
  include_ext = ["go", "tpl", "tmpl", "html"]
  include_file = []
  kill_delay = "0s"
  log = "build-errors.log"
  poll = false
  poll_interval = 0
  rerun = false
  rerun_delay = 500
  send_interrupt = false
  stop_on_root = false

[color]
  app = ""
  build = "yellow"
  main = "magenta"
  runner = "green"
  watcher = "cyan"

[log]
  main_only = false
  time = false

[misc]
  clean_on_exit = false

[screen]
  clear_on_rebuild = false
  keep_scroll = true
```

### Day 3-4ï¼šåŸºç¡€é…ç½®å’Œå·¥å…·ç±»

#### æ­¥éª¤4ï¼šé…ç½®ç®¡ç†

**internal/infrastructure/config/config.go**
```go
package config

import (
    "fmt"
    "github.com/spf13/viper"
)

type Config struct {
    App      AppConfig      `mapstructure:"app"`
    Database DatabaseConfig `mapstructure:"database"`
    Redis    RedisConfig    `mapstructure:"redis"`
    JWT      JWTConfig      `mapstructure:"jwt"`
    Log      LogConfig      `mapstructure:"log"`
    Upload   UploadConfig   `mapstructure:"upload"`
}

type AppConfig struct {
    Name    string `mapstructure:"name"`
    Version string `mapstructure:"version"`
    Port    int    `mapstructure:"port"`
    Mode    string `mapstructure:"mode"`
}

type DatabaseConfig struct {
    Driver          string `mapstructure:"driver"`
    Host            string `mapstructure:"host"`
    Port            int    `mapstructure:"port"`
    Username        string `mapstructure:"username"`
    Password        string `mapstructure:"password"`
    Database        string `mapstructure:"database"`
    Charset         string `mapstructure:"charset"`
    ParseTime       bool   `mapstructure:"parse_time"`
    Loc             string `mapstructure:"loc"`
    MaxIdleConns    int    `mapstructure:"max_idle_conns"`
    MaxOpenConns    int    `mapstructure:"max_open_conns"`
    ConnMaxLifetime int    `mapstructure:"conn_max_lifetime"`
}

type RedisConfig struct {
    Host         string `mapstructure:"host"`
    Port         int    `mapstructure:"port"`
    Password     string `mapstructure:"password"`
    Database     int    `mapstructure:"database"`
    PoolSize     int    `mapstructure:"pool_size"`
    MinIdleConns int    `mapstructure:"min_idle_conns"`
}

type JWTConfig struct {
    Secret             string `mapstructure:"secret"`
    ExpireHours        int    `mapstructure:"expire_hours"`
    RefreshExpireHours int    `mapstructure:"refresh_expire_hours"`
}

type LogConfig struct {
    Level      string `mapstructure:"level"`
    Format     string `mapstructure:"format"`
    Output     string `mapstructure:"output"`
    FilePath   string `mapstructure:"file_path"`
    MaxSize    int    `mapstructure:"max_size"`
    MaxBackups int    `mapstructure:"max_backups"`
    MaxAge     int    `mapstructure:"max_age"`
}

type UploadConfig struct {
    MaxSize      int64    `mapstructure:"max_size"`
    AllowedTypes []string `mapstructure:"allowed_types"`
    StoragePath  string   `mapstructure:"storage_path"`
    ChunkSize    int      `mapstructure:"chunk_size"`
}

// LoadConfig åŠ è½½é…ç½®æ–‡ä»¶
func LoadConfig(path string) (*Config, error) {
    viper.AddConfigPath(path)
    viper.SetConfigName("config")
    viper.SetConfigType("yaml")

    // è‡ªåŠ¨è¯»å–ç¯å¢ƒå˜é‡
    viper.AutomaticEnv()

    if err := viper.ReadInConfig(); err != nil {
        return nil, fmt.Errorf("failed to read config file: %w", err)
    }

    var config Config
    if err := viper.Unmarshal(&config); err != nil {
        return nil, fmt.Errorf("failed to unmarshal config: %w", err)
    }

    return &config, nil
}

// GetDSN è·å–æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²
func (c *DatabaseConfig) GetDSN() string {
    return fmt.Sprintf("%s:%s@tcp(%s:%d)/%s?charset=%s&parseTime=%t&loc=%s",
        c.Username, c.Password, c.Host, c.Port, c.Database, 
        c.Charset, c.ParseTime, c.Loc)
}
```

#### æ­¥éª¤5ï¼šæ—¥å¿—ç³»ç»Ÿ

**pkg/logger/logger.go**
```go
package logger

import (
    "os"
    "go.uber.org/zap"
    "go.uber.org/zap/zapcore"
    "gopkg.in/natefinch/lumberjack.v2"
)

var Logger *zap.Logger

type Config struct {
    Level      string
    Format     string
    Output     string
    FilePath   string
    MaxSize    int
    MaxBackups int
    MaxAge     int
}

// InitLogger åˆå§‹åŒ–æ—¥å¿—å™¨
func InitLogger(config *Config) error {
    // è®¾ç½®æ—¥å¿—çº§åˆ«
    level := zapcore.InfoLevel
    switch config.Level {
    case "debug":
        level = zapcore.DebugLevel
    case "info":
        level = zapcore.InfoLevel
    case "warn":
        level = zapcore.WarnLevel
    case "error":
        level = zapcore.ErrorLevel
    }

    // è®¾ç½®ç¼–ç å™¨
    var encoder zapcore.Encoder
    encoderConfig := zapcore.EncoderConfig{
        TimeKey:        "timestamp",
        LevelKey:       "level",
        NameKey:        "logger",
        CallerKey:      "caller",
        FunctionKey:    zapcore.OmitKey,
        MessageKey:     "message",
        StacktraceKey:  "stacktrace",
        LineEnding:     zapcore.DefaultLineEnding,
        EncodeLevel:    zapcore.LowercaseLevelEncoder,
        EncodeTime:     zapcore.ISO8601TimeEncoder,
        EncodeDuration: zapcore.SecondsDurationEncoder,
        EncodeCaller:   zapcore.ShortCallerEncoder,
    }

    if config.Format == "json" {
        encoder = zapcore.NewJSONEncoder(encoderConfig)
    } else {
        encoder = zapcore.NewConsoleEncoder(encoderConfig)
    }

    // è®¾ç½®è¾“å‡º
    var writer zapcore.WriteSyncer
    if config.Output == "file" {
        writer = zapcore.AddSync(&lumberjack.Logger{
            Filename:   config.FilePath,
            MaxSize:    config.MaxSize,
            MaxBackups: config.MaxBackups,
            MaxAge:     config.MaxAge,
            Compress:   true,
        })
    } else {
        writer = zapcore.AddSync(os.Stdout)
    }

    // åˆ›å»ºæ ¸å¿ƒ
    core := zapcore.NewCore(encoder, writer, level)

    // åˆ›å»ºæ—¥å¿—å™¨
    Logger = zap.New(core, zap.AddCaller(), zap.AddStacktrace(zapcore.ErrorLevel))

    return nil
}

// ä¾¿æ·æ–¹æ³•
func Debug(msg string, fields ...zap.Field) {
    Logger.Debug(msg, fields...)
}

func Info(msg string, fields ...zap.Field) {
    Logger.Info(msg, fields...)
}

func Warn(msg string, fields ...zap.Field) {
    Logger.Warn(msg, fields...)
}

func Error(msg string, fields ...zap.Field) {
    Logger.Error(msg, fields...)
}

func Fatal(msg string, fields ...zap.Field) {
    Logger.Fatal(msg, fields...)
}
```

#### æ­¥éª¤6ï¼šé”™è¯¯å¤„ç†

**pkg/errors/errors.go**
```go
package errors

import (
    "fmt"
    "net/http"
)

// é¢†åŸŸé”™è¯¯ç±»å‹
type DomainError struct {
    Code    string `json:"code"`
    Message string `json:"message"`
    Details string `json:"details,omitempty"`
}

func (e *DomainError) Error() string {
    return e.Message
}

// åº”ç”¨é”™è¯¯ç±»å‹
type AppError struct {
    Type       string `json:"type"`
    Message    string `json:"message"`
    StatusCode int    `json:"status_code"`
    Err        error  `json:"-"`
}

func (e *AppError) Error() string {
    if e.Err != nil {
        return fmt.Sprintf("%s: %v", e.Message, e.Err)
    }
    return e.Message
}

// é”™è¯¯æ„é€ å‡½æ•°
func NewDomainError(code, message string) *DomainError {
    return &DomainError{
        Code:    code,
        Message: message,
    }
}

func NewValidationError(message string) *AppError {
    return &AppError{
        Type:       "validation_error",
        Message:    message,
        StatusCode: http.StatusBadRequest,
    }
}

func NewPermissionDeniedError(message string) *AppError {
    return &AppError{
        Type:       "permission_denied",
        Message:    message,
        StatusCode: http.StatusForbidden,
    }
}

func NewNotFoundError(message string) *AppError {
    return &AppError{
        Type:       "not_found",
        Message:    message,
        StatusCode: http.StatusNotFound,
    }
}

func NewInternalError(message string, err error) *AppError {
    return &AppError{
        Type:       "internal_error",
        Message:    message,
        StatusCode: http.StatusInternalServerError,
        Err:        err,
    }
}

// ä¸šåŠ¡é”™è¯¯å¸¸é‡
var (
    ErrUserNotFound     = NewDomainError("USER_NOT_FOUND", "ç”¨æˆ·ä¸å­˜åœ¨")
    ErrUserExists       = NewDomainError("USER_EXISTS", "ç”¨æˆ·å·²å­˜åœ¨")
    ErrInvalidPassword  = NewDomainError("INVALID_PASSWORD", "å¯†ç é”™è¯¯")
    ErrProjectNotFound  = NewDomainError("PROJECT_NOT_FOUND", "é¡¹ç›®ä¸å­˜åœ¨")
    ErrTaskNotFound     = NewDomainError("TASK_NOT_FOUND", "ä»»åŠ¡ä¸å­˜åœ¨")
    ErrInvalidStatus    = NewDomainError("INVALID_STATUS", "æ— æ•ˆçš„çŠ¶æ€è½¬æ¢")
    ErrPermissionDenied = NewDomainError("PERMISSION_DENIED", "æƒé™ä¸è¶³")
)
```

### Day 5ï¼šæ•°æ®åº“è¿æ¥å’ŒåŸºç¡€æ¨¡å‹

#### æ­¥éª¤7ï¼šæ•°æ®åº“è¿æ¥

**internal/infrastructure/persistence/mysql/connection.go**
```go
package mysql

import (
    "fmt"
    "time"
    "gorm.io/driver/mysql"
    "gorm.io/gorm"
    "gorm.io/gorm/logger"
    "github.com/taskflow/internal/infrastructure/config"
    appLogger "github.com/taskflow/pkg/logger"
)

// NewDatabase åˆ›å»ºæ•°æ®åº“è¿æ¥
func NewDatabase(config *config.DatabaseConfig) (*gorm.DB, error) {
    dsn := config.GetDSN()
    
    db, err := gorm.Open(mysql.Open(dsn), &gorm.Config{
        Logger: logger.Default.LogMode(logger.Info),
    })
    if err != nil {
        return nil, fmt.Errorf("failed to connect to database: %w", err)
    }

    // è·å–åº•å±‚çš„sql.DB
    sqlDB, err := db.DB()
    if err != nil {
        return nil, fmt.Errorf("failed to get underlying sql.DB: %w", err)
    }

    // è®¾ç½®è¿æ¥æ± å‚æ•°
    sqlDB.SetMaxIdleConns(config.MaxIdleConns)
    sqlDB.SetMaxOpenConns(config.MaxOpenConns)
    sqlDB.SetConnMaxLifetime(time.Duration(config.ConnMaxLifetime) * time.Second)

    // æµ‹è¯•è¿æ¥
    if err := sqlDB.Ping(); err != nil {
        return nil, fmt.Errorf("failed to ping database: %w", err)
    }

    appLogger.Info("Database connected successfully")
    return db, nil
}
```

#### æ­¥éª¤8ï¼šåˆ›å»ºä¸»ç¨‹åºå…¥å£

**cmd/api/main.go**
```go
package main

import (
    "context"
    "fmt"
    "net/http"
    "os"
    "os/signal"
    "syscall"
    "time"

    "github.com/gin-gonic/gin"
    "github.com/taskflow/internal/infrastructure/config"
    "github.com/taskflow/internal/infrastructure/persistence/mysql"
    "github.com/taskflow/pkg/logger"
)

func main() {
    // åŠ è½½é…ç½®
    cfg, err := config.LoadConfig("./configs")
    if err != nil {
        panic(fmt.Sprintf("Failed to load config: %v", err))
    }

    // åˆå§‹åŒ–æ—¥å¿—
    if err := logger.InitLogger(&logger.Config{
        Level:      cfg.Log.Level,
        Format:     cfg.Log.Format,
        Output:     cfg.Log.Output,
        FilePath:   cfg.Log.FilePath,
        MaxSize:    cfg.Log.MaxSize,
        MaxBackups: cfg.Log.MaxBackups,
        MaxAge:     cfg.Log.MaxAge,
    }); err != nil {
        panic(fmt.Sprintf("Failed to initialize logger: %v", err))
    }

    logger.Info("Starting TaskFlow API Server")

    // è¿æ¥æ•°æ®åº“
    db, err := mysql.NewDatabase(&cfg.Database)
    if err != nil {
        logger.Fatal("Failed to connect to database", logger.Error(err))
    }

    // è®¾ç½®Ginæ¨¡å¼
    if cfg.App.Mode == "production" {
        gin.SetMode(gin.ReleaseMode)
    }

    // åˆ›å»ºGinå¼•æ“
    router := gin.New()
    
    // æ·»åŠ ä¸­é—´ä»¶
    router.Use(gin.Logger())
    router.Use(gin.Recovery())

    // å¥åº·æ£€æŸ¥ç«¯ç‚¹
    router.GET("/health", func(c *gin.Context) {
        c.JSON(http.StatusOK, gin.H{
            "status": "ok",
            "time":   time.Now().Format(time.RFC3339),
            "app":    cfg.App.Name,
            "version": cfg.App.Version,
        })
    })

    // åˆ›å»ºHTTPæœåŠ¡å™¨
    srv := &http.Server{
        Addr:    fmt.Sprintf(":%d", cfg.App.Port),
        Handler: router,
    }

    // åœ¨goroutineä¸­å¯åŠ¨æœåŠ¡å™¨
    go func() {
        logger.Info(fmt.Sprintf("Server starting on port %d", cfg.App.Port))
        if err := srv.ListenAndServe(); err != nil && err != http.ErrServerClosed {
            logger.Fatal("Failed to start server", logger.Error(err))
        }
    }()

    // ç­‰å¾…ä¸­æ–­ä¿¡å·æ¥ä¼˜é›…åœ°å…³é—­æœåŠ¡å™¨
    quit := make(chan os.Signal, 1)
    signal.Notify(quit, syscall.SIGINT, syscall.SIGTERM)
    <-quit
    logger.Info("Server shutting down...")

    // è®¾ç½®5ç§’çš„è¶…æ—¶æ—¶é—´æ¥å…³é—­æœåŠ¡å™¨
    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)
    defer cancel()

    if err := srv.Shutdown(ctx); err != nil {
        logger.Fatal("Server forced to shutdown", logger.Error(err))
    }

    logger.Info("Server exited")
}
```

### Day 6-7ï¼šæµ‹è¯•å’Œå®Œå–„

#### æ­¥éª¤9ï¼šåˆ›å»ºMakefile

**Makefile**
```makefile
.PHONY: help build run test clean docker-up docker-down migrate

# é»˜è®¤ç›®æ ‡
help: ## æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
	@echo "Available commands:"
	@grep -E '^[a-zA-Z_-]+:.*?## .*$$' $(MAKEFILE_LIST) | sort | awk 'BEGIN {FS = ":.*?## "}; {printf "\033[36m%-20s\033[0m %s\n", $$1, $$2}'

# æ„å»º
build: ## æ„å»ºåº”ç”¨ç¨‹åº
	@echo "Building application..."
	@go build -o bin/taskflow cmd/api/main.go

# è¿è¡Œ
run: ## è¿è¡Œåº”ç”¨ç¨‹åº
	@echo "Running application..."
	@go run cmd/api/main.go

# æµ‹è¯•
test: ## è¿è¡Œæµ‹è¯•
	@echo "Running tests..."
	@go test -v ./...

# æµ‹è¯•è¦†ç›–ç‡
test-coverage: ## è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
	@echo "Running tests with coverage..."
	@go test -v -coverprofile=coverage.out ./...
	@go tool cover -html=coverage.out -o coverage.html
	@echo "Coverage report generated: coverage.html"

# æ¸…ç†
clean: ## æ¸…ç†æ„å»ºæ–‡ä»¶
	@echo "Cleaning..."
	@rm -rf bin/
	@rm -f coverage.out coverage.html

# Dockerå¼€å‘ç¯å¢ƒ
docker-up: ## å¯åŠ¨Dockerå¼€å‘ç¯å¢ƒ
	@echo "Starting Docker development environment..."
	@docker-compose -f docker-compose.dev.yml up -d

docker-down: ## åœæ­¢Dockerå¼€å‘ç¯å¢ƒ
	@echo "Stopping Docker development environment..."
	@docker-compose -f docker-compose.dev.yml down

docker-logs: ## æŸ¥çœ‹Dockeræ—¥å¿—
	@docker-compose -f docker-compose.dev.yml logs -f

# æ•°æ®åº“è¿ç§»
migrate-up: ## æ‰§è¡Œæ•°æ®åº“è¿ç§»
	@echo "Running database migrations..."
	@go run cmd/migrate/main.go up

migrate-down: ## å›æ»šæ•°æ®åº“è¿ç§»
	@echo "Rolling back database migrations..."
	@go run cmd/migrate/main.go down

# ä»£ç æ ¼å¼åŒ–
fmt: ## æ ¼å¼åŒ–ä»£ç 
	@echo "Formatting code..."
	@go fmt ./...

# ä»£ç æ£€æŸ¥
lint: ## è¿è¡Œä»£ç æ£€æŸ¥
	@echo "Running linter..."
	@golangci-lint run

# ç”ŸæˆAPIæ–‡æ¡£
docs: ## ç”ŸæˆAPIæ–‡æ¡£
	@echo "Generating API documentation..."
	@swag init -g cmd/api/main.go -o docs/swagger

# å®‰è£…ä¾èµ–
deps: ## å®‰è£…ä¾èµ–
	@echo "Installing dependencies..."
	@go mod tidy
	@go mod download
```

#### æ­¥éª¤10ï¼šåˆå§‹åŒ–æ•°æ®åº“è„šæœ¬

**scripts/init.sql**
```sql
-- åˆ›å»ºæ•°æ®åº“ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
CREATE DATABASE IF NOT EXISTS taskflow CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- ä½¿ç”¨æ•°æ®åº“
USE taskflow;

-- åˆ›å»ºåŸºç¡€è¡¨ç»“æ„ï¼ˆç®€åŒ–ç‰ˆï¼Œç”¨äºæµ‹è¯•ï¼‰
CREATE TABLE IF NOT EXISTS users (
    id VARCHAR(36) PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    name VARCHAR(100) NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    avatar VARCHAR(500),
    status ENUM('active', 'inactive', 'suspended') DEFAULT 'active',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_email (email),
    INDEX idx_status (status)
);

-- æ’å…¥æµ‹è¯•æ•°æ®
INSERT INTO users (id, email, name, password_hash, status) VALUES 
('user-001', 'admin@taskflow.com', 'Administrator', '$2a$10$example.hash', 'active'),
('user-002', 'user@taskflow.com', 'Test User', '$2a$10$example.hash', 'active')
ON DUPLICATE KEY UPDATE id=id;
```

## ğŸ“ Week 1 æ€»ç»“å’Œä¸‹å‘¨é¢„å‘Š

### æœ¬å‘¨å®Œæˆçš„å·¥ä½œ
- âœ… é¡¹ç›®ç›®å½•ç»“æ„æ­å»º
- âœ… åŸºç¡€é…ç½®ç³»ç»Ÿ
- âœ… æ—¥å¿—ç³»ç»Ÿ
- âœ… é”™è¯¯å¤„ç†æœºåˆ¶
- âœ… æ•°æ®åº“è¿æ¥
- âœ… Dockerå¼€å‘ç¯å¢ƒ
- âœ… åŸºç¡€é¡¹ç›®æ¡†æ¶

### éªŒæ”¶æ ‡å‡†
1. **é¡¹ç›®å¯ä»¥å¯åŠ¨**ï¼š`make run` èƒ½æ­£å¸¸å¯åŠ¨æœåŠ¡
2. **å¥åº·æ£€æŸ¥**ï¼šè®¿é—® `http://localhost:8080/health` è¿”å›æ­£å¸¸
3. **æ•°æ®åº“è¿æ¥**ï¼šå¯åŠ¨æ—¶æ—¥å¿—æ˜¾ç¤ºæ•°æ®åº“è¿æ¥æˆåŠŸ
4. **Dockerç¯å¢ƒ**ï¼š`make docker-up` èƒ½å¯åŠ¨å®Œæ•´å¼€å‘ç¯å¢ƒ

### ä¸‹å‘¨é¢„å‘Šï¼ˆWeek 2ï¼‰
- ğŸ¯ **JWTè®¤è¯ç³»ç»Ÿ**ï¼šç”¨æˆ·ç™»å½•ã€tokenç”Ÿæˆå’ŒéªŒè¯
- ğŸ¯ **åŸºç¡€ä¸­é—´ä»¶**ï¼šè®¤è¯ã€CORSã€æ—¥å¿—ã€é”™è¯¯å¤„ç†
- ğŸ¯ **ç”¨æˆ·æ¨¡å‹**ï¼šUserèšåˆæ ¹å’ŒåŸºç¡€æ“ä½œ
- ğŸ¯ **APIæ¡†æ¶**ï¼šç»Ÿä¸€çš„è¯·æ±‚å“åº”æ ¼å¼
- ğŸ¯ **Swaggeræ–‡æ¡£**ï¼šAPIæ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ

### ğŸƒâ€â™‚ï¸ ç°åœ¨å¼€å§‹å®è·µ

è¯·æŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤åˆ›å»ºé¡¹ç›®ç»“æ„ï¼Œæˆ‘ä¼šåœ¨æ¯ä¸€æ­¥ä¸ºä½ æä¾›è¯¦ç»†æŒ‡å¯¼ã€‚å¦‚æœé‡åˆ°ä»»ä½•é—®é¢˜ï¼Œéšæ—¶å‘Šè¯‰æˆ‘ï¼

**ç¬¬ä¸€æ­¥**ï¼šåˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„å¹¶åˆå§‹åŒ–Goæ¨¡å—
**ç¬¬äºŒæ­¥**ï¼šåˆ›å»ºé…ç½®æ–‡ä»¶å’ŒDockerç¯å¢ƒ
**ç¬¬ä¸‰æ­¥**ï¼šå®ç°åŸºç¡€å·¥å…·ç±»ï¼ˆé…ç½®ã€æ—¥å¿—ã€é”™è¯¯å¤„ç†ï¼‰
**ç¬¬å››æ­¥**ï¼šåˆ›å»ºä¸»ç¨‹åºå¹¶æµ‹è¯•è¿è¡Œ

å‡†å¤‡å¥½å¼€å§‹äº†å—ï¼ŸğŸš€
