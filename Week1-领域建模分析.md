# Week 1: ä»»åŠ¡å®¡æ‰¹æµé¢†åŸŸå»ºæ¨¡åˆ†æ

## ğŸ“Š DDD æ ¸å¿ƒæ¦‚å¿µé€Ÿè§ˆ

### 1. DDD å››å¤§æ ¸å¿ƒæ¦‚å¿µ
| æ¦‚å¿µ | å®šä¹‰ | åœ¨ä»»åŠ¡å®¡æ‰¹æµä¸­çš„ä½“ç° |
|------|------|---------------------|
| **é€šç”¨è¯­è¨€** | ä¸šåŠ¡ä¸“å®¶å’ŒæŠ€æœ¯å›¢é˜Ÿçš„å…±åŒè¯æ±‡ | ä»»åŠ¡ã€å®¡æ‰¹ã€åˆ†é…ã€å®Œæˆç­‰ä¸šåŠ¡æœ¯è¯­ |
| **é™ç•Œä¸Šä¸‹æ–‡** | æ˜ç¡®çš„ä¸šåŠ¡è¾¹ç•Œ | ä»»åŠ¡ç®¡ç†ã€ç”¨æˆ·ç®¡ç†ã€é€šçŸ¥ç®¡ç† |
| **èšåˆæ ¹** | ä¸šåŠ¡æ•°æ®çš„ä¸€è‡´æ€§è¾¹ç•Œ | Taskèšåˆæ ¹ç®¡ç†ä»»åŠ¡çŠ¶æ€ |
| **é¢†åŸŸäº‹ä»¶** | ä¸šåŠ¡è¿‡ç¨‹ä¸­å‘ç”Ÿçš„é‡è¦äº‹ä»¶ | ä»»åŠ¡æäº¤ã€å®¡æ‰¹é€šè¿‡ã€ä»»åŠ¡åˆ†é… |

### 2. æˆ˜æœ¯è®¾è®¡ vs æˆ˜ç•¥è®¾è®¡
- **æˆ˜ç•¥è®¾è®¡**ï¼šåˆ’åˆ†é™ç•Œä¸Šä¸‹æ–‡ï¼Œå®šä¹‰é€šç”¨è¯­è¨€
- **æˆ˜æœ¯è®¾è®¡**ï¼šè®¾è®¡èšåˆæ ¹ã€å®ä½“ã€å€¼å¯¹è±¡ã€é¢†åŸŸæœåŠ¡

## ğŸ¯ ä¸šåŠ¡åœºæ™¯æ·±åº¦åˆ†æ

### ä¸šåŠ¡æµç¨‹è¯¦ç»†æ‹†è§£
```
1. å‘˜å·¥åˆ›å»ºä»»åŠ¡ç”³è¯·
   â”œâ”€â”€ å¡«å†™ä»»åŠ¡æ ‡é¢˜ã€æè¿°ã€é¢„æœŸå®Œæˆæ—¶é—´
   â”œâ”€â”€ é€‰æ‹©ä»»åŠ¡ç±»å‹ï¼ˆå¼€å‘ã€æµ‹è¯•ã€è¿ç»´ç­‰ï¼‰
   â””â”€â”€ æäº¤ç»™ç›´å±é¢†å¯¼

2. ç›´å±é¢†å¯¼å®¡æ‰¹
   â”œâ”€â”€ æŸ¥çœ‹ä»»åŠ¡è¯¦æƒ…å’Œå‘˜å·¥å·¥ä½œè´Ÿè½½
   â”œâ”€â”€ è¯„ä¼°ä»»åŠ¡åˆç†æ€§å’Œä¼˜å…ˆçº§
   â”œâ”€â”€ é€šè¿‡/æ‹’ç»/è¦æ±‚ä¿®æ”¹
   â””â”€â”€ æ·»åŠ å®¡æ‰¹æ„è§

3. éƒ¨é—¨ä¸»ç®¡ç¡®è®¤ï¼ˆå¯é€‰ï¼‰
   â”œâ”€â”€ é«˜ä¼˜å…ˆçº§ä»»åŠ¡éœ€è¦ä¸»ç®¡ç¡®è®¤
   â”œâ”€â”€ æ£€æŸ¥èµ„æºåˆ†é…åˆç†æ€§
   â””â”€â”€ æœ€ç»ˆç¡®è®¤æˆ–è°ƒæ•´

4. ä»»åŠ¡åˆ†é…æ‰§è¡Œ
   â”œâ”€â”€ ç³»ç»Ÿè‡ªåŠ¨åˆ†é…æˆ–æ‰‹åŠ¨æŒ‡å®šæ‰§è¡Œäºº
   â”œâ”€â”€ é€šçŸ¥ç›¸å…³äººå‘˜
   â””â”€â”€ ä»»åŠ¡è¿›å…¥æ‰§è¡ŒçŠ¶æ€

5. æ‰§è¡Œå’Œåé¦ˆ
   â”œâ”€â”€ æ‰§è¡Œäººæ›´æ–°ä»»åŠ¡è¿›åº¦
   â”œâ”€â”€ é‡åˆ°é—®é¢˜æ—¶ç”³è¯·ååŠ©
   â””â”€â”€ å®Œæˆåæäº¤ç»“æœåé¦ˆ
```

### ä¸šåŠ¡è§„åˆ™è¯†åˆ«
1. **çŠ¶æ€è½¬æ¢è§„åˆ™**ï¼š
   - è‰ç¨¿ â†’ å¾…å®¡æ‰¹ â†’ å·²æ‰¹å‡† â†’ æ‰§è¡Œä¸­ â†’ å·²å®Œæˆ
   - ä»»æ„çŠ¶æ€éƒ½å¯ä»¥è½¬ä¸º"å·²æ‹’ç»"
   - å·²æ‹’ç»çš„ä»»åŠ¡å¯ä»¥ä¿®æ”¹åé‡æ–°æäº¤

2. **æƒé™è§„åˆ™**ï¼š
   - åªæœ‰ä»»åŠ¡åˆ›å»ºè€…å¯ä»¥ç¼–è¾‘è‰ç¨¿çŠ¶æ€çš„ä»»åŠ¡
   - åªæœ‰æŒ‡å®šçš„å®¡æ‰¹äººå¯ä»¥å®¡æ‰¹ä»»åŠ¡
   - æ‰§è¡Œäººå¯ä»¥æ›´æ–°ä»»åŠ¡è¿›åº¦

3. **ä¸šåŠ¡çº¦æŸ**ï¼š
   - åŒä¸€ä¸ªäººä¸èƒ½åŒæ—¶æ˜¯ä»»åŠ¡åˆ›å»ºè€…å’Œå®¡æ‰¹äºº
   - é«˜ä¼˜å…ˆçº§ä»»åŠ¡å¿…é¡»ç»è¿‡éƒ¨é—¨ä¸»ç®¡ç¡®è®¤
   - ä»»åŠ¡æ‰§è¡Œæ—¶é—´ä¸èƒ½è¶…è¿‡é¢„è®¾çš„æˆªæ­¢æ—¶é—´

## ğŸ—ï¸ é¢†åŸŸå»ºæ¨¡

### é™ç•Œä¸Šä¸‹æ–‡åˆ’åˆ†

```mermaid
graph TB
    subgraph "ä»»åŠ¡ç®¡ç†ä¸Šä¸‹æ–‡"
        Task[ä»»åŠ¡èšåˆ]
        TaskStatus[ä»»åŠ¡çŠ¶æ€]
        TaskType[ä»»åŠ¡ç±»å‹]
    end
    
    subgraph "ç”¨æˆ·ç®¡ç†ä¸Šä¸‹æ–‡"
        User[ç”¨æˆ·]
        Role[è§’è‰²]
        Permission[æƒé™]
    end
    
    subgraph "å®¡æ‰¹æµç¨‹ä¸Šä¸‹æ–‡"
        Approval[å®¡æ‰¹è®°å½•]
        ApprovalRule[å®¡æ‰¹è§„åˆ™]
        Workflow[å·¥ä½œæµ]
    end
    
    subgraph "é€šçŸ¥ä¸Šä¸‹æ–‡"
        Notification[é€šçŸ¥]
        NotificationTemplate[é€šçŸ¥æ¨¡æ¿]
    end
```

### æ ¸å¿ƒèšåˆæ ¹è®¾è®¡

#### 1. Task èšåˆæ ¹
```go
type Task struct {
    // èšåˆæ ¹æ ‡è¯†
    ID          TaskID
    
    // åŸºæœ¬ä¿¡æ¯
    Title       string
    Description string
    TaskType    TaskType
    Priority    Priority
    
    // æ—¶é—´ä¿¡æ¯
    CreatedAt   time.Time
    DueDate     time.Time
    CompletedAt *time.Time
    
    // çŠ¶æ€ä¿¡æ¯
    Status      TaskStatus
    
    // å‚ä¸äººå‘˜
    CreatorID   UserID
    ApproverID  UserID
    AssigneeID  *UserID
    
    // å®¡æ‰¹å†å²
    Approvals   []Approval
    
    // é¢†åŸŸäº‹ä»¶
    events      []DomainEvent
}

// ä¸šåŠ¡æ–¹æ³•
func (t *Task) Submit() error
func (t *Task) Approve(approverID UserID, comment string) error  
func (t *Task) Reject(approverID UserID, reason string) error
func (t *Task) Assign(assigneeID UserID) error
func (t *Task) Complete(result string) error
```

#### 2. User èšåˆæ ¹
```go
type User struct {
    ID       UserID
    Name     string
    Email    string
    Role     Role
    
    // ç»„ç»‡ç»“æ„
    DepartmentID DepartmentID
    ManagerID    *UserID
    
    // æƒé™
    Permissions []Permission
}

// ä¸šåŠ¡æ–¹æ³•
func (u *User) CanApprove(task *Task) bool
func (u *User) CanAssign(task *Task) bool  
func (u *User) GetSubordinates() []User
```

### å€¼å¯¹è±¡è®¾è®¡

```go
// ä»»åŠ¡çŠ¶æ€å€¼å¯¹è±¡
type TaskStatus int

const (
    TaskStatusDraft TaskStatus = iota
    TaskStatusPending
    TaskStatusApproved  
    TaskStatusInProgress
    TaskStatusCompleted
    TaskStatusRejected
)

// ä»»åŠ¡ä¼˜å…ˆçº§å€¼å¯¹è±¡
type Priority int

const (
    PriorityLow Priority = iota
    PriorityMedium
    PriorityHigh
    PriorityCritical
)

// å®¡æ‰¹è®°å½•å€¼å¯¹è±¡
type Approval struct {
    ApproverID UserID
    Action     ApprovalAction
    Comment    string
    Timestamp  time.Time
}
```

### é¢†åŸŸæœåŠ¡è®¾è®¡

```go
// ä»»åŠ¡åˆ†é…é¢†åŸŸæœåŠ¡
type TaskAssignmentService struct {
    userRepo UserRepository
    taskRepo TaskRepository
}

func (s *TaskAssignmentService) AutoAssignTask(task *Task) (*User, error) {
    // æ ¹æ®ä»»åŠ¡ç±»å‹å’Œå›¢é˜Ÿè´Ÿè½½è‡ªåŠ¨åˆ†é…
}

// å®¡æ‰¹è§„åˆ™é¢†åŸŸæœåŠ¡
type ApprovalRuleService struct {
    ruleRepo ApprovalRuleRepository
}

func (s *ApprovalRuleService) GetRequiredApprovers(task *Task) ([]User, error) {
    // æ ¹æ®ä»»åŠ¡ä¼˜å…ˆçº§å’Œç±»å‹ç¡®å®šå®¡æ‰¹äºº
}
```

### é¢†åŸŸäº‹ä»¶è®¾è®¡

```go
// ä»»åŠ¡æäº¤äº‹ä»¶
type TaskSubmittedEvent struct {
    TaskID    TaskID
    CreatorID UserID
    Timestamp time.Time
}

// ä»»åŠ¡å®¡æ‰¹é€šè¿‡äº‹ä»¶
type TaskApprovedEvent struct {
    TaskID     TaskID
    ApproverID UserID
    Comment    string
    Timestamp  time.Time
}

// ä»»åŠ¡åˆ†é…äº‹ä»¶
type TaskAssignedEvent struct {
    TaskID     TaskID
    AssigneeID UserID
    AssignerID UserID
    Timestamp  time.Time
}

// ä»»åŠ¡å®Œæˆäº‹ä»¶
type TaskCompletedEvent struct {
    TaskID     TaskID
    AssigneeID UserID
    Result     string
    Timestamp  time.Time
}
```

## ğŸ“‹ ä»“å‚¨æ¥å£è®¾è®¡

```go
type TaskRepository interface {
    Save(task *Task) error
    FindByID(id TaskID) (*Task, error)
    FindByCreator(creatorID UserID) ([]*Task, error)
    FindByAssignee(assigneeID UserID) ([]*Task, error)
    FindPendingApproval(approverID UserID) ([]*Task, error)
}

type UserRepository interface {
    Save(user *User) error
    FindByID(id UserID) (*User, error)
    FindByEmail(email string) (*User, error)
    FindSubordinates(managerID UserID) ([]*User, error)
}
```

## ğŸ¨ é¢†åŸŸæ¨¡å‹ç±»å›¾

```mermaid
classDiagram
    class Task {
        -TaskID id
        -string title
        -TaskStatus status
        -UserID creatorID
        -UserID approverID
        +Submit() error
        +Approve() error
        +Reject() error
        +Assign() error
        +Complete() error
    }
    
    class User {
        -UserID id
        -string name
        -Role role
        -UserID managerID
        +CanApprove() bool
        +CanAssign() bool
    }
    
    class Approval {
        -UserID approverID
        -ApprovalAction action
        -string comment
        -time.Time timestamp
    }
    
    class TaskStatus {
        <<enumeration>>
        Draft
        Pending
        Approved
        InProgress
        Completed
        Rejected
    }
    
    Task ||--o{ Approval : contains
    Task --> TaskStatus : has
    User ||--o{ Task : creates
    User ||--o{ Task : approves
```

## âœ… Week 1 å®Œæˆæ£€æŸ¥æ¸…å•

- [x] æ¢³ç† DDD æ ¸å¿ƒæ¦‚å¿µ
- [x] æ·±åº¦åˆ†æä»»åŠ¡å®¡æ‰¹æµä¸šåŠ¡åœºæ™¯
- [x] è¯†åˆ«ä¸šåŠ¡è§„åˆ™å’Œçº¦æŸ
- [x] åˆ’åˆ†é™ç•Œä¸Šä¸‹æ–‡
- [x] è®¾è®¡æ ¸å¿ƒèšåˆæ ¹ï¼ˆTaskã€Userï¼‰
- [x] å®šä¹‰å€¼å¯¹è±¡å’Œé¢†åŸŸæœåŠ¡
- [x] è®¾è®¡é¢†åŸŸäº‹ä»¶
- [x] å®šä¹‰ä»“å‚¨æ¥å£
- [x] ç»˜åˆ¶é¢†åŸŸæ¨¡å‹ç±»å›¾

## ğŸ” å¯ä¿¡åº¦è‡ªè¯„

### è®¾è®¡è´¨é‡è¯„åˆ†ï¼ˆ1-10åˆ†ï¼‰

| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|------|------|------|
| **ä¸šåŠ¡ç†è§£å‡†ç¡®æ€§** | 8/10 | åŸºäºå¸¸è§ä¼ä¸šå®¡æ‰¹æµç¨‹ï¼Œä¸šåŠ¡åœºæ™¯çœŸå®å¯ä¿¡ |
| **DDDæ¦‚å¿µåº”ç”¨** | 9/10 | æ­£ç¡®åº”ç”¨äº†èšåˆæ ¹ã€å€¼å¯¹è±¡ã€é¢†åŸŸäº‹ä»¶ç­‰æ¦‚å¿µ |
| **æ¨¡å‹å®Œæ•´æ€§** | 7/10 | æ ¸å¿ƒæ¨¡å‹å®Œæ•´ï¼Œä½†ç¼ºå°‘ä¸€äº›è¾¹ç•Œåœºæ™¯å¤„ç† |
| **ä»£ç å¯å®ç°æ€§** | 9/10 | Goè¯­è¨€å®ç°æ¸…æ™°ï¼Œæ¥å£è®¾è®¡åˆç† |
| **æ‰©å±•æ€§** | 8/10 | æ”¯æŒå¤šçº§å®¡æ‰¹ã€ä¸åŒä»»åŠ¡ç±»å‹ç­‰æ‰©å±• |

### æ½œåœ¨é£é™©ç‚¹ï¼š
1. **å¤æ‚å®¡æ‰¹æµ**ï¼šå½“å‰è®¾è®¡å‡è®¾ç®€å•çš„ä¸¤çº§å®¡æ‰¹ï¼Œå¤æ‚çš„å¤šåˆ†æ”¯å®¡æ‰¹æµéœ€è¦è¿›ä¸€æ­¥è®¾è®¡
2. **å¹¶å‘å¤„ç†**ï¼šå¤šäººåŒæ—¶æ“ä½œåŒä¸€ä»»åŠ¡çš„å¹¶å‘æ§åˆ¶éœ€è¦åœ¨å®ç°æ—¶è€ƒè™‘
3. **æ€§èƒ½ä¼˜åŒ–**ï¼šå¤§é‡ä»»åŠ¡æŸ¥è¯¢çš„æ€§èƒ½ä¼˜åŒ–ç­–ç•¥éœ€è¦åœ¨åç»­é˜¶æ®µè®¾è®¡

### ä¸‹ä¸€æ­¥æ”¹è¿›å»ºè®®ï¼š
1. æ·»åŠ æ›´å¤šè¾¹ç•Œåœºæ™¯çš„å¤„ç†ï¼ˆå¦‚ä»»åŠ¡å–æ¶ˆã€é‡æ–°åˆ†é…ç­‰ï¼‰
2. è¯¦ç»†è®¾è®¡çŠ¶æ€æœºçš„è½¬æ¢è§„åˆ™å’ŒéªŒè¯é€»è¾‘  
3. è€ƒè™‘å¼•å…¥å·¥ä½œæµå¼•æ“å¤„ç†å¤æ‚çš„å®¡æ‰¹æµç¨‹

**æ€»ä½“å¯ä¿¡åº¦ï¼š8.2/10** 
- é€‚åˆä½œä¸º DDD å­¦ä¹ çš„å®æˆ˜é¡¹ç›®
- ä¸šåŠ¡åœºæ™¯è´´è¿‘å®é™…ï¼ŒæŠ€æœ¯å®ç°å¯è¡Œ
- ä¸ºåç»­çš„æ¶æ„è®¾è®¡å’Œç¼–ç å®ç°å¥ å®šäº†è‰¯å¥½åŸºç¡€
